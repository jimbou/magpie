--- before: core/Solver.cc
+++ after: core/Solver.cc
@@ -1046,6 +1046,7 @@
     //
     for (int i = 0; i < trail.size(); i++){
         Var v = var(trail[i]);
+        trail    .capacity(v+1);
 
         if (reason(v) != CRef_Undef && (ca[reason(v)].reloced() || locked(ca[reason(v)])))
             /*auto*/{
